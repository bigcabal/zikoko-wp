!function(e){"use strict";var t=e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype,o=e.Blob&&function(){try{return Boolean(new Blob)}catch(e){return!1}}(),n=o&&e.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}}(),a=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||e.MSBlobBuilder,r=/^data:((.*?)(;charset=.*?)?)(;base64)?,/,l=(o||a)&&e.atob&&e.ArrayBuffer&&e.Uint8Array&&function(e){var t,l,i,c,f,d,u,m,s;if(t=e.match(r),!t)throw new Error("invalid data URI");for(l=t[2]?t[1]:"text/plain"+(t[3]||";charset=US-ASCII"),i=!!t[4],c=e.slice(t[0].length),f=i?atob(c):decodeURIComponent(c),d=new ArrayBuffer(f.length),u=new Uint8Array(d),m=0;m<f.length;m+=1)u[m]=f.charCodeAt(m);return o?new Blob([n?u:d],{type:l}):(s=new a,s.append(d),s.getBlob(l))};e.HTMLCanvasElement&&!t.toBlob&&(t.mozGetAsFile?t.toBlob=function(e,o,n){e(n&&t.toDataURL&&l?l(this.toDataURL(o,n)):this.mozGetAsFile("blob",o))}:t.toDataURL&&l&&(t.toBlob=function(e,t,o){e(l(this.toDataURL(t,o)))})),"function"==typeof define&&define.amd?define(function(){return l}):"object"==typeof module&&module.exports?module.exports=l:e.dataURLtoBlob=l}(window),$(document).ready(function(){function e(e,t,o){for(var n=e.split(" "),r="",l=360,i=40,c=0;c<n.length;c++){var f=r+n[c]+" ",d=a.measureText(f),u=d.width;u>l&&c>0?(a.fillText(r,30,t),r=n[c]+" ",t+=25,i+=25):r=f}a.fillText(r,30,t),o(i)}function t(e,t,o){for(var n,a=0;9999>a;a++){var l=Math.floor(Math.random()*r.length);if(r[l].gender===t|"any"===r[l].gender&&r[l].country===o|"any"===r[l].country){n=r[l];break}}for(var i=n.sentence,i=i.replace(/{{name}}/g,e),i=i.split("."),a=0;a<i.length;a++){i[a].charAt(0);" "===i[a].charAt(0)?i[a]=i[a].slice(1)+".":i[a]+="."}return i}function o(o,n){var r,l=document.getElementById("logo");r="male"===n?document.getElementById("figure-male"):document.getElementById("figure-female");var i=t(o,n);a.fillStyle="#fff",a.fillRect(0,0,600,350),a.lineWidth="6",a.strokeStyle="#8235b6",a.rect(0,0,600,350),a.stroke(),a.drawImage(r,460,50),a.drawImage(l,30,300),a.font="18px Montserrat",a.fillStyle="#000";for(var c=50,f=0;f<i.length;f++)e(i[f],c,function(e){c+=e})}var n=document.getElementById("beLikeZikoko"),a=n.getContext("2d"),r=ajaxinfo;$("#generateMeme").on("click",function(e){var t=$('input[name="name"]').val(),a=$('select[name="gender"]').val();$('select[name="country"]').val();o(t,a);var r=window.location.href,l="Be like "+t+". Make your story.",i=n.toDataURL("image/png");return $("li.download a").attr("href",i),$("li.facebook a").attr("href","https://facebook.com/dialog/feed?app_id=593692017438309&link="+r+"&name="+l+"&redirect_uri="+r),$("li.twitter a").attr("href","https://twitter.com/intent/tweet/?text="+l+"&url="+r+"&via=zikokomag&related=zikokomag"),$("li.repeat a").attr("href",window.location.href),$("#beLikeZikokoImg").attr("src",i),$(".belike-result").show(),$("html, body").animate({scrollTop:$(".belike-result").offset().top-20},500),n.toBlob?n.toBlob(function(e){console.log(e);var t=new FormData;t.append("action","ajax_upload"),t.append("image",e,"belike.png")},"image/png"):console.log("no"),!1})});